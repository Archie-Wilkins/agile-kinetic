{% extends "Base.html" %}

{%block Content %}
<head>
  <link rel="stylesheet" href="static/CSS/admin.css">
</head>

<div class="admin">
  <h2>Admin</h2>

  <div class="updateBlog updateSection">
    <h3>Add Blog Post</h3>
    <form id="blogUpload" method="post" id="updateBlogForm" name="updateBlogForm">

      <label for="addTitle">Title</label><br>
      <input type="text" name="blogUpdateTitle"><br>

      <label for="addAuthor">Author</label><br>
      <input type="text" name="blogUpdateAuthor"><br>

      <label for="addText">Message</label><br>
      <textarea name="blogUpdateText" rows="8" cols="80"></textarea><br>

      <button type="submit">Upload</button>
    </form>
  </div>


  <div class="updateFAQ updateSection">
    <h3>Add Frequently Asked Question</h3>
    <form id="updateFAQForm" name="updateFAQForm" onsubmit="return FaqSubmit()">

      <label for="faqQuestion">Question</label><br>
      <input type="text" name="faqQuestion"><br>

      <label for="updateText">Answer</label><br>
      <textarea name="faqAnswer" rows="8" cols="80"></textarea><br>

      <button type="submit">Upload</button>
    </form>
    <span id="txt"></span>
</div>

<script>
  //Add blog script
  function BlogSubmit() {
    console.log("Blog post upload started")
    var addTitle = document.forms["updateBlogForm"]["addTitle"].value;
    var addAuthor = document.forms["updateBlogForm"]["addAuthor"].value;
    var addText = document.forms["updateBlogForm"]["addText"].value;
    params = 'addTitle='+addTitle+'&addAuthor='+addAuthor+'&addText'+addText;
    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", '/Admin', true); // true is asynchronous
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.onload = function() {
      if (xhttp.readyState === 4 && xhttp.status === 200) {
        console.log(xhttp.responseText);
        document.getElementById("txt").innerHTML = xhttp.responseText;
      } else {
        console.error(xhttp.statusText);
      }
    };
    xhttp.send(params);
    return false;
  }

  // FAQ Script
  function FaqSubmit() {
    console.log("FAQ Submit Started")
    var faqQuestion = document.forms["updateFAQForm"]["faqQuestion"].value;
    var faqAnswer = document.forms["updateFAQForm"]["faqAnswer"].value;
    params = 'faqQuestion='+faqQuestion+'&faqAnswer='+faqAnswer;
    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", '/Admin', true); // true is asynchronous
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.onload = function() {
      if (xhttp.readyState === 4 && xhttp.status === 200) {
        console.log(xhttp.responseText);
        document.getElementById("txt").innerHTML = xhttp.responseText;
      } else {
        console.error(xhttp.statusText);
      }
    };
    xhttp.send(params);
    return false;
  }

</script>

{%endblock%}
